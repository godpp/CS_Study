# # 네트워크

## # OSI 7계층

* 물리 계층 (Physical Layer)
    * 네트워크의 기본 하드웨어 전송 기술을 이룬다.
* 데이터 링크 계층 (Data Link Layer)
    * 점대점 간 신뢰성있는 전송을 보장하기 위한 계층으로 CRC(순환중복검사)기반의 오류 제어와 흐름 제어가 필요하다.
    * 주소 값은 물리적으로 할당 받는데, 이는 네트워크 카드가 만들어질 때부터 맥 주소(MAC Address)가 정해져 있다는 뜻이다.
    * 데이터 링크 계층의 가장 잘 알려진 예는 이더넷이다.
* 네트워크 계층 (Network Layer)
    * 여러개의 노드를 거칠때마다 경로를 찾아주는 역할을 하는 계층으로 다양한 길이의 데이터를 네트워크들을 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 기능적, 절차적 수단을 제공한다.
    * 네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션, 오류 제어, 인터네트워킹 등을 수행한다.
* 전송 계층 (Transport Layer)
    * 양 끝단의 사용자들이 신뢰성있는 데이터를 주고 받을 수 있도록 해 주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다.
    * 시퀸스 넘버 기반의 오류 제어 방식을 사용한다.
* 세션 계층 (Session Layer)
    * 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다.
    * 동시 송수신 방식, 반이중 방식, 전이중 방식의 통신과 함께, 체크 포인팅과 유후, 종료, 다시 시작 과정 등을 수행한다.
    * 이 계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.
* 표현 계층 (Presentation Layer)
    * 코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로부터 덜어 준다.
    * MIME 인코딩이나 암호화 등의 동작이 이 계층에서 이루어진다.
* 응용 계층 (Application Layer)
    * 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.

## # TCP와 UDP

* TCP(Transmission Control Protocol, 전송제어 프로토콜)
	* TCP는 신뢰성이 없는 인터넷을 통해 종단 간에 신뢰성 있는 바이트 스트림을 전송하도록 설계
	* TCP 서비스는 송신자와 수신자 모두가 소켓이라고 부르는 종단점을 생성함으로써 이루어진다.
	* 모든 TCP 연결은 전이중, 점대점 방식이다. 전이중이란 전송이 양방향으로 동시에 일어날 수 있음을 의미하며 점대점이란 각 연결이 정확히 2개의 종단점을 가지고 있음을 의미한다.
	* TCP는 멀티태스킹이나 브로드캐스팅을 지원하지 않는다.

* UDP(User Datagram Protocol, 사용자 데이터그램 프로토콜)
	* UDP는 비연결형 프로토콜이다.
	* UDP는 흐름제어, 오류제어 또는 손상된 세그먼트의 수신에 대한 재전송을 하지 않는다.
	* UDP는 포트들을 사용하여 IP 프로토콜에 인터페이스를 제공한다.
	* UDP를 사용한 것들에는 DNS가 있다. 어떤 호스트 네임의 IP 주소를 찾을 필요가 있는 프로그램은 DNS 서버로 호스트 네임을 포함한 UDP 패킷을 보낸다. 이 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 응답한다.


## # HTTP

* 정의
	* 웹 서버와 사용자의 인터넷 브라우저 사이에 문서를 전송하기 위해 사용되는 통신 규약

* 메소드
	* GET
		* 데이터가 HTTP Message의 Header 부분 URL에 담겨서 전송
		* URL 공간에 데이터가 담겨가기 때문에 전송할 수 있는 데이터의 크기가 제한적
		* 데이터가 URL에 그대로 노출되기 때문에 보안성은 없다.
		* 서버에서 어떤 데이터를 가져와 보여주는 용도이지, 서버의 값이나 상태 등을 변경하지 않는다.
		* GET 방식의 요청은 브라우저에서 Caching 가능
	* POST
		* 데이터가 HTTP Message의 Body 부분에 담겨서 전송
		* GET 방식보단 담을 수 있는 데이터의 크기가 크고 보안성이 더 좋다. (하지만 보안적인 측면에서는 암호화를 하지 않는 이상 고만고만하다.)
		* 서버의 값이나 상태를 변경하기 위해서 또는 추가하기 위해서 사용된다.

* 문제점
	* TCP/IP는 도청 가능한 네트워크이다.
		* TCP/IP는 전부 통신 경로 상에서 엿볼 수 있다. (패킷을 수집하는 것만으로도 도청 가능)
		* 통신 자체를 암호화. (SSL, TLS라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용을 암호화 할 수 있다.)
		* 콘텐츠를 암호화. (HTTP Message에 포함되는 콘텐츠만 암호화)
	* 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
		* HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리가 없기 때문에 누구든지 Request를 보낼 수 있다.
		* IP 주소나 포트 등에서 그 웹서버에 엑세스 제한이 없는 경우 Request가 오면 상대가 누구든지 무언가의 Response를 반환한다.
		* SSL은 상대를 확인하는 수단으로 증명서를 제공하므로 SSL을 이용해 상대를 확인할 수 있다.
	* 완전성을 증명할 수 없기 때문에 변조가 가능하다.
		* 서버 또는 클라이언트에서 수신한 내용이 송신측에서 보낸 내용과 일치한다라는 것을 보장 할 수 없다.
		* 공격자가 도중에 Request나 Response를 빼앗아 변조하는 공격인 중간자 공격을 당해도 이 사실을 알 수가 없다.
		* HTTPS를 사용하면 해결된다.


## # HTTPS

* 정의
	* HTTPS는 새로운 애플리케이션	계층의 프로토콜이 아니라, HTTP 통신하는 소켓 부분을 SSL, TLS라는 프로토콜로 대체하는 것 뿐이다.

* 특징
	* HTTP는 원래 TCP와 직접 통신했지만, HTTPS에서 HTTP는 SSL과 통신하고 SSL이 TCP와 통신하게 된다.
	* HTTPS의 SSL에서는 공통키 암호화 방식과 공개키 암호화 방식을 혼합한 하이브리드 암호 시스템을 사용한다.

* 모든 웹 페이지에서 HTTPS를 사용하지 않는 이유
	* 평문 통신에 비해서 암호화 통신은 CPU나 메모리 등 리소스가 많이 필요하다.
	* 통신할 때 마다 암호화를 하면 많은 리소스를 소비하기 때문에 서버 한 대당 처리할 수 있는 Request의 수가 줄어들게 된다.

## # 웹 통신의 큰 흐름

* 우리가 Chrome을 실행시켜 주소창에 특정 URL 값을 입력시키면 어떤 일이 일어나는가?
	* In 브라우저
		1. URL에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 그 의미를 조사한다.
		2. 조사된 의미에 따라 Request 메시지를 만든다.
		3. 만들어진 메시지를 웹 서버로 전송한다.

 	
