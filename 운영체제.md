# # 운영체제

## # 프로세스(Process)

* 정의
	* 디스크로부터 메모리에 적재되어 CPU의 할당을 받을 수 있는 실행중인 프로그램을 말한다.
	* 프로세스는 실행 중에 동적으로 할당되는 메모리인 힙을 포함한다.
	* 프로세스는 메인 메모리에서 동작한다.

* 프로세스 제어 블록(Process Control Block, PCB)
	* 특정 프로세스에 대한 중요한 정보를 저장하고 있는 운영체제의 자료구조
	* 프로세스는 CPU를 할당받아 작업을 처리하다가도 프로세스 전환이 발생하면 진행하던 작업을 저장하고 CPU를 반환해야 하는데, 이때 작업의 진행 상황을 모두 PCB에 저장하게 된다. 그리고 다시 CPU를 할당받게 되면 PCB에 저장되어있던 내용을 불러와 이전에 종료됐던 시점부터 다시 작업을 수행한다.


## # 스레드(Thread)

* 정의
	* 스레드는 프로세스의 실행 단위
	* 한 프로세스 내에서 동작되는 여러 실행 흐름으로 프로세스 내의 주소 공간이나 자원을 공유할 수 있다.
	* 스레드는 스레드 ID, 프로그램 카운터, 레지스터 집합 그리고 스택으로 구성된다.

* 멀티스레딩
	* 정의
		* 하나의 프로세스를 다수의 실행 단위로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상시키는 것.
	* 장점
		* 메모리 공간과 시스템 자원 소모 감소
		* 전역 변수의 공간 또는 동적으로 할당된 공간인 Heap 영역을 이용하여 데이터를 주고 받기 때문에 스레드 간의 통신 방법이 훨씬 간단하다.
		* 스레드의 context switch는 프로세스 context switch와는 달리 캐시 메모리를 비울 필요가 없기 때문에 더 빠르다. -> 시스템의 처리량이 향상되고 자원 소모가 줄어들며 자연스럽게 프로그램의 응답 시간이 단축
	* 단점
		* 서로 다른 스레드가 데이터와 힙 영역을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다. -> 멀티스레딩 환경에서는 동기화(Sync)작업이 필요

* 멀티 스레드 VS 멀티 프로세스
	* 멀티 스레드는 멀티 프로세스보다 적은 메모리 공간을 차지하고 context switch가 빠르다는 장점이 있지만, 오류로 인해 하나의 스레드가 종료되면 전체 스레드가 종료될 수 있다는 점과 동기화 문제를 안고 있다.
	* 멀티 프로세스는 하나의 프로세스가 죽더라도 다른 프로세스에는 영향을 끼치지 않고 정상적으로 수행된다는 장점이 있지만, 멀티 스레드보다 많은 메모리 공간과 CPU 시간을 차지한다는 단점이 있다.

* 동기와 비동기의 차이
	* Sync
		* 메소드를 실행시킴과 동시에 반환 값이 기대되는 경우 (실행되었을 때 값이 반환되기 전까지는 Blocking 되어 있다는 것을 의미)
	* Async
		* 메소드를 실행시킴과 동시에 반환 값이 기대되지 않는 경우 (Blocking 되지 않고 이벤트 큐에 넣거나 백그라운드 스레드에게 해당 task를 위힘하고, 바로 다음 코드를 실행하기 때문에 기대되는 값이 바로 반환되지 않는 것)


## # 임계영역(Critical Section)

* 정의
	* 멀티 스레딩 문제점에서 나오듯, 동일한 자원을 동시에 접근하는 작업을 실행하는 코드 영역을 Critical Section이라 칭한다.

* 해결법
	* 세마포(Semaphores)
		* 소프트웨어상에서 Critical Section 문제를 해결하기 위한 동기화 도구
		* 지정된 스레드 개수만큼 실행될 수 있고, 지정된 개수를 넘어서 스레드가 실행되려 하면 세마포어를 세워 막는다.
		* 카운팅 세마포 : 가용한 개수를 가진 자원에 대해 접근을 제어하는데 사용되며, 세마포는 그 가용한 자원의 개수로 초기화 된다. 자원을 사용하면 세마포가 감소, 방출하면 세마포가 증가한다.
		* Mutex 세마포 : 한 개의 스레드에 대해서만 단독으로 실행시키는 것.
		* 바쁜 대기(Busy Waiting) : Critical Section에 진입해야하는 프로세스는 진입 코드를 계속 반복 실행하며 CPU 시간을 낭비하는 것.
		* 교착상태(Deadlock) : 요청한 자원을 다른 프로세스가 점유하고 있고, 점유하고 있는 프로세스도 다른 자원에 대해 대기 상태에 있기 때문에 두 프로세스가 대기 상태에서 벗어날 수 없는 상황.


## # 스케줄러(Scheduler)

* 장기 스케줄러(Job Scheduler)
	* 메모리 pool에 저장되어 있는 프로세스 중 어떤 프로세스에 메모리를 할당하여 ready queue로 보낼지 결정하는 역할
	* 메모리와 디스크 사이의 스케줄링을 담당
	* 프로세스에 메모리를 할당
	* 메모리에 몇 개의 프로그램이 올라갈 것인지를 제어

* 단기 스케줄러(CPU Scheduler)
	* Ready Queue에 존재하는 프로세스 중 어떤 프로세스를 Running 시킬지 결정
	* CPU와 메모리 사이의 스케줄링을 담당
	* 프로세스에 CPU를 할당

* 중기 스케줄러(Swapper)
	* 현 시스템 메모리에 너무 많은 프로그램이 동시에 올라가는 것을 조절하는 스케줄러
	* 여유 공간 마련을 위해 프로세스를 통째로 메모리에서 디스크로 쫓아냄
